<!-- This file is autogenerated. See CONTRIBUTING.md for instructions to add an entry. -->

# Changelog

<!-- next version -->

## v0.10.0

This release includes version 0.105.0 of the upstream Collector components.

The individual upstream Collector changelogs can be found here:

v0.105.0:

- <https://github.com/open-telemetry/opentelemetry-collector/releases/tag/v0.105.0>
- <https://github.com/open-telemetry/opentelemetry-collector-contrib/releases/tag/v0.105.0>

### ðŸš€ New components ðŸš€

- `statsdreceiver`: Add statsd receiver to manifest (#229)
- `zipkinreceiver`: Added the zipkin receiver to the Dynatrace collector distro (#225)

<details>
<summary>Highlights from the upstream Collector changelog</summary>
</br>

### ðŸ›‘ Breaking changes ðŸ›‘

- `service`: add `service.disableOpenCensusBridge` feature gate which is enabled by default to remove the dependency on OpenCensus ([#10414](https://github.com/open-telemetry/opentelemetry-collector/issues/10414))
- `confmap`: Promote `confmap.strictlyTypedInput` feature gate to beta. ([#10552](https://github.com/open-telemetry/opentelemetry-collector/issues/10552))
  
  This feature gate changes the following:

  - Configurations relying on the implicit type casting behaviors listed on [#9532](https://github.com/open-telemetry/opentelemetry-collector/issues/9532) will start to fail.
  - Configurations using URI expansion (i.e. `field: ${env:ENV}`) for string-typed fields will use the value passed in `ENV` verbatim without intermediate type casting.

- `stanza`: errors from Operator.Process are returned instead of silently ignored. ([#33783](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/33783))
  This public function is affected: https://pkg.go.dev/github.com/open-telemetry/opentelemetry-collector-contrib/pkg/stanza@v0.104.0/operator/helper#WriterOperator.Write

### ðŸ§° Bug fixes ðŸ§°

- `confmap`: Fixes issue where confmap could not escape `$$` when `confmap.unifyEnvVarExpansion` is enabled. ([#10560](https://github.com/open-telemetry/opentelemetry-collector/pull/10560))
- `otlpreceiver`: Fixes a bug where the otlp receiver's http response was not properly translating grpc error codes to http status codes. ([#10574](https://github.com/open-telemetry/opentelemetry-collector/pull/10574))
- `service/telemetry`: Add ability to set service.name for spans emitted by the Collector ([#10489](https://github.com/open-telemetry/opentelemetry-collector/issues/10489))
- `internal/localhostgate`: Correctly log info message when `component.UseLocalHostAsDefaultHost` is enabled ([#8510](https://github.com/open-telemetry/opentelemetry-collector/issues/8510))
- `exporterhelper`: Fix incorrect deduplication of otelcol_exporter_queue_size and otelcol_exporter_queue_capacity metrics if multiple exporters are used. ([#10444](https://github.com/open-telemetry/opentelemetry-collector/issues/10444))
- `prometheusreceiver`: Fix hash computation to include non exported fields like regex in scrape configuration for TargetAllocator ([#29313](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/29313))
- `syslogreceiver`: Allow to define `max_octets` for octet counting RFC5424 syslog parser ([#33182](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/33182))

### ðŸ’¡ Enhancements ðŸ’¡

- `pkg/ottl`: Added Hex() converter function ([#31929](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/31929))
- `pkg/ottl`: Add IsRootSpan() converter function. ([#32918](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/32918))
    Converter `IsRootSpan()` returns `true` if the span in the corresponding context is root, that means its `parent_span_id` equals to hexadecimal representation of zero. In all other scenarios function returns `false`.
- `pkg/ottl`: Emit traces for statement sequence executions to troubleshoot OTTL statements/conditions ([#33433](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/33433))
- `receiver/filelog`: Add filelog.container.removeOriginalTimeField feature-flag for removing original time field ([#33946](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/33946))
- `statsdreceiver`: Allow configuring summary percentiles ([#33701](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/33701))

</details>

## v0.9.0

This release includes version 0.104.0 of the upstream Collector components.

The individual upstream Collector changelogs can be found here:

v0.104.0:

- <https://github.com/open-telemetry/opentelemetry-collector/releases/tag/v0.104.0>
- <https://github.com/open-telemetry/opentelemetry-collector-contrib/releases/tag/v0.104.0>

> [!WARNING]
> This release includes two important breaking changes:
> 
> 1. The `otlpreceiver`, `jaegerreceiver` and `healthcheckextension` will now use `localhost` by default instead of `0.0.0.0`. This may break the receivers when the sender is not running on the same host, particularly in containerized environments like Kubernetes. If you depend on `0.0.0.0` disable the `component.UseLocalHostAsDefaultHost` feature gate or explicitly set the endpoint to `0.0.0.0`.
>    For more details, check out the [OTel blog post](https://opentelemetry.io/blog/2024/hardening-the-collector-one).
> 2. Expansion of BASH-style environment variables, such as `$FOO` will no longer be supported by default. If you depend on this syntax, disable the `confmap.unifyEnvVarExpansion` feature gate, but know that the feature will be removed in the future in favor of `${env:FOO}`.

<details>
<summary>Highlights from the upstream Collector changelog</summary>
</br>

### ðŸ›‘ Breaking changes ðŸ›‘

- `pkg/ottl`: Changed ScopeContext, InstrumentationResourceContext, TransformContext interfaces to make SchemaURL accessible in resources and scopes on all signals ([#30229](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/30229))
- `filter`: Remove deprecated `filter.CombinedFilter` ([#10348](https://github.com/open-telemetry/opentelemetry-collector/issues/10348))
- `otelcol`: By default, `otelcol.NewCommand` and `otelcol.NewCommandMustSetProvider` will set the `DefaultScheme` to `env`. [#10435](https://github.com/open-telemetry/opentelemetry-collector/issues/10435))
- `otelcol`: The otelcol.NewCommand now requires at least one provider be set. ([#10436](https://github.com/open-telemetry/opentelemetry-collector/issues/10436))

### ðŸš© Deprecations ðŸš©

- `otelcol`: The `otelcol.NewCommandMustSetProvider` is deprecated. Use `otelcol.NewCommand` instead. ([#10436](https://github.com/open-telemetry/opentelemetry-collector/issues/10436))

### ðŸ’¡ Enhancements ðŸ’¡

- `k8sattributesprocessor`: Add support for exposing `k8s.pod.ip` as a resource attribute ([#32960](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/32960))
- `debugexporter`: In `normal` verbosity, display one line of text for each telemetry record (log, data point, span) ([#7806](https://github.com/open-telemetry/opentelemetry-collector/issues/7806))
- `debugexporter`: Add option `use_internal_logger` ([#10226](https://github.com/open-telemetry/opentelemetry-collector/issues/10226))
- `debugexporter`: Print Span.TraceState() when present. ([#10421](https://github.com/open-telemetry/opentelemetry-collector/issues/10421))

### ðŸ§° Bug fixes ðŸ§°

- `resourcedetectionprocessor`: Fetch CPU info only if related attributes are enabled ([#33774](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/33774))
- `tailsamplingprocessor`: Fix precedence of inverted match in and policy ([#33671](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/33671))
  Previously if the decision from a policy evaluation was `NotSampled` or `InvertNotSampled` it would return a `NotSampled` decision regardless, effectively downgrading the result.
  This was breaking the documented behaviour that inverted decisions should take precedence over all others.
- `otlpexporter`: Update validation to support both dns:// and dns:/// ([#10449](https://github.com/open-telemetry/opentelemetry-collector/issues/10449))
- `service`: Fixed a bug that caused otel-collector to fail to start with ipv6 metrics endpoint service telemetry. ([#10011](https://github.com/open-telemetry/opentelemetry-collector/issues/10011))
  
</details>

## v0.8.0

This release includes version 0.103.0 of the upstream Collector components.

*NOTE:* This release is in line with the upstream distributions of the Collector version 0.103.1, which is based on the same
0.103.0 upstream Collector components.

The individual upstream Collector changelogs can be found here:

v0.103.0:

- <https://github.com/open-telemetry/opentelemetry-collector/releases/tag/v0.103.0>
- <https://github.com/open-telemetry/opentelemetry-collector-contrib/releases/tag/v0.103.0>

<details>
<summary>Highlights from the upstream Collector changelog</summary>
</br>

### ðŸ›‘ Breaking changes ðŸ›‘

- `exporter/debug`: Disable sampling by default ([#9921](https://github.com/open-telemetry/opentelemetry-collector/issues/9921)).
  To restore the behavior that was previously the default, set `sampling_thereafter` to `500`.

### ðŸš© Deprecations ðŸš© ###

- `healthcheckextension`: Remove incorrect logic behind `check_collector_pipeline` config ([#33469](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/33469)).
  This logic incorrectly set the pipeline to OK after waiting for enough callbacks from the
  opencensus library to be called. As this was broken, I'm removing it to remove the dependency
  on opencensus as well. Improvements will be available via healthcheckv2 extension.


### ðŸ§° Bug fixes ðŸ§°

- `filelogreceiver`: Container parser should add k8s metadata as resource attributes and not as log record attributes ([#33341](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/33341))
- `prometheusreceiver`: Fall back to scrape config job/instance labels for aggregated metrics without instance/job labels ([#32555](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/32555))

</details>

### ðŸ’¡ Enhancements ðŸ’¡

- `examples`: Added an example for using the syslog receiver, as well as integration tests for the added example. (#136)

## v0.7.0

This release includes version 0.102.1 of the upstream Collector components.

The individual upstream Collector changelogs can be found here:

0.102.1:

- <https://github.com/open-telemetry/opentelemetry-collector/releases/tag/v0.102.1>
- (no changes/patch release for opentelemetry-collector-contrib)

0.102.0:

- <https://github.com/open-telemetry/opentelemetry-collector/releases/tag/v0.102.0>
- <https://github.com/open-telemetry/opentelemetry-collector-contrib/releases/tag/v0.102.0>

<details>
<summary>Highlights from the upstream Collector changelog</summary>
</br>

### This release addresses CVE-2024-36129 ([GHSA-c74f-6mfw-mm4v](https://github.com/open-telemetry/opentelemetry-collector/security/advisories/GHSA-c74f-6mfw-mm4v)) fully

### ðŸ›‘ Breaking changes ðŸ›‘

- `envprovider`: Restricts Environment Variable names.  Environment variable names must now be ASCII only and start with a letter or an underscore, and can only contain underscores, letters, or numbers. ([#9531](https://github.com/open-telemetry/opentelemetry-collector/issues/9531))
- `confighttp`: Apply MaxRequestBodySize to the result of a decompressed body ([#10289](https://github.com/open-telemetry/opentelemetry-collector/pull/10289))
  When using compressed payloads, the Collector would verify only the size of the compressed payload. 
  This change applies the same restriction to the decompressed content. As a security measure, a limit of 20 MiB was added, which makes this a breaking change. 
  For most clients, this shouldn't be a problem, but if you often have payloads that decompress to more than 20 MiB, you might want to either configure your
  client to send smaller batches (recommended), or increase the limit using the MaxRequestBodySize option.
- `k8sattributesprocessor`: Move `k8sattr.rfc3339` feature gate to stable. ([#33304](https://github.com/open-telemetry/opentelemetry-collector-contrib/pull/33304))

### ðŸ§° Bug fixes ðŸ§°

- `batchprocessor`: ensure attributes are set on cardinality metadata metric ([#9674](https://github.com/open-telemetry/opentelemetry-collector/issues/9674))
- `batchprocessor`: Fixing processor_batch_metadata_cardinality which was broken in v0.101.0 ([#10231](https://github.com/open-telemetry/opentelemetry-collector/issues/10231))
- `batchprocessor`: respect telemetry level for all metrics ([#10234](https://github.com/open-telemetry/opentelemetry-collector/pull/10234))
- `configrpc`: Use own compressors for zstd (#10323)
   Before this change, the zstd compressor we used didn't respect the max message size. This addresses CVE-2024-36129 (GHSA-c74f-6mfw-mm4v) on `configgrpc`.

</details>

## v0.6.0

This release includes version 0.101.0 of the upstream Collector components.

The individual upstream Collector changelogs can be found here:

v0.101.0:

- <https://github.com/open-telemetry/opentelemetry-collector/releases/tag/v0.101.0>
- <https://github.com/open-telemetry/opentelemetry-collector-contrib/releases/tag/v0.101.0>

<details>

<summary>Highlights from the upstream Collector changelog</summary>
</br>

### ðŸ›‘ Breaking changes ðŸ›‘

- `filelog, journald, tcp, udp, syslog, windowseventlog receivers`: The internal logger has been changed from zap.SugaredLogger to zap.Logger. ([#32177](https://github.com/open-telemetry/opentelemetry-collector-contrib/pull/32177))
This should not have any meaningful impact on most users but the logging format for some logs may have changed.

### ðŸ’¡ Enhancements ðŸ’¡

- `filelogreceiver`: Add container operator parser ([#31959](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/31959))
- `resourcedetectionprocessor`: Support GCP Bare Metal Solution in resource detection processor. ([#32985](https://github.com/open-telemetry/opentelemetry-collector-contrib/pull/32985))
- `processor/transform`: Allow common where clause ([#27830](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/27830))

</details>

### ðŸ’¡ Enhancements ðŸ’¡

- Add section to list which container registries are available to pull images from ([#188](https://github.com/Dynatrace/dynatrace-otel-collector/pull/188))
- Use chloggen to generate changelog entries ([#191](https://github.com/Dynatrace/dynatrace-otel-collector/pull/191))
