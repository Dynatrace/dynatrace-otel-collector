receivers:
  otlp:
    protocols:
      grpc:
        endpoint: 0.0.0.0:4317
processors:
  tail_sampling:
    policies:
      - name: keep-errors
        type: status_code
        status_code: {status_codes: [ERROR, UNSET]}
      - name: keep-slow-traces
        type: latency
        latency: {threshold_ms: 500}
    decision_wait: 30s
exporters:
  debug:
    verbosity: detailed
  otlphttp:
    endpoint: https://{your-environment-id}.live.dynatrace.com/api/v2/otlp
    headers:
      Authorization: "Api-Token ${API_TOKEN}"
service:
  pipelines:
    traces:
      receivers: [otlp]
      processors: [tail_sampling]
      exporters: [otlphttp]
