apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Name }}-config
  namespace: e2estatsd
data:
  relay: |
    extensions:
      health_check:
        endpoint: 0.0.0.0:13133
    receivers:
      statsd:
        aggregation_interval: 30s
        endpoint: 0.0.0.0:8125
    exporters:
      debug:
        verbosity: detailed
      otlp:
        endpoint: {{ .HostEndpoint }}:4317
        tls:
          insecure: true
    service:
      telemetry:
        metrics:
          address: 0.0.0.0:8888
        logs:
          level: debug
      extensions:
      - health_check
      pipelines:
        metrics:
          receivers:
          - statsd
          exporters:
          - otlp
          - debug